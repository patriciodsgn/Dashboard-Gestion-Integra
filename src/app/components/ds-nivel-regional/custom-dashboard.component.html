<!-- Contenedor flex para alinear el panel principal y la tarjeta de Jardín -->
<div class="flex gap-4">
    <!-- Contenedor principal del encabezado y las tarjetas -->
    <div class="p-4 shadow-md rounded-lg mb-4 flex-1" [style.backgroundColor]="headerColor">
      
      <!-- Título de región y fecha -->
      <div class="mb-4">
        <h3 class="text-lg font-medium flex items-center">
          <fa-icon [icon]="faCalendar" class="text-lg mr-2"></fa-icon>
          {{ RegionSeleccionada }} / {{ fechaActual }}
        </h3>
        <h6 class="text-xs text-gray-600">Gestión de Datos Estratégicos / Casa Central</h6>
      </div>
  
      <!-- Contenedor flex para todas las tarjetas en una sola línea -->
      <div class="flex items-center gap-4">
        <!-- Tarjeta de "Establecimientos" plana -->
        <div class="flex items-center p-2 min-w-[200px]" [style.backgroundColor]="headerColor">
          <img src="assets/images/Mesa de trabajo 51.png" alt="Establecimientos Icono" class="w-8 h-8 mr-2" />
          <div>
            <div class="text-lg font-bold">{{ tarjetasSuperiores[0].valor }}</div>
            <div class="text-sm font-semibold">{{ tarjetasSuperiores[0].titulo }}</div>
          </div>
        </div>
  
        <!-- Tarjetas de datos -->
        <div *ngFor="let tarjeta of tarjetasSuperiores.slice(1, 5)"
             class="flex flex-col items-center justify-center shadow-md rounded-md p-2 border border-gray-300 min-w-[200px] h-[100px]"
             [style.backgroundColor]="cardColor">
          <fa-icon [icon]="tarjeta.icon" class="text-xl mb-1"></fa-icon>
          <div class="text-lg font-bold">{{ tarjeta.valor }}</div>
          <div class="text-xs font-semibold text-center">{{ tarjeta.titulo }}</div>
        </div>
      </div>
    </div>
  
    <!-- Tarjeta de "Jardín Sobre Ruedas" -->
    <div class="text-white flex flex-col items-center justify-center shadow-md rounded-md p-2 border border-gray-300 mb-4 min-w-[200px] h-[100px]"
         [style.backgroundColor]="cardColor">
      <fa-icon [icon]="faBus" class="text-xl mb-1"></fa-icon>
      <div class="text-lg font-bold">{{ tarjetasSuperiores[5].valor }}</div>
      <div class="text-xs font-semibold text-center">{{ tarjetasSuperiores[5].titulo }}</div>
    </div>
  </div>

<!-- Mapa y Datos Adicionales -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8">
    <!-- Mapa -->
    <div #mapContainer class="h-[500px] border-2 border-gray-300 rounded-lg shadow-lg p-4 bg-white">
        <div id="map-container" style="width: 100%; height: 100%; position: relative;"></div>
    </div>

    <!-- Panel de Información Adicional con estilo personalizado -->
    <div class="h-[500px] border border-gray-200 rounded-lg shadow-md p-4 bg-white overflow-hidden">
        <h4 class="text-sm font-semibold mb-2 text-gray-700">Datos Adicionales</h4>
        
        <div class="h-[440px] p-2 rounded-lg bg-white shadow-sm overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100">
            <!-- Contenedor para las columnas de comunas y establecimientos -->
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-xs">
                <div *ngFor="let columna of DistribuirEnColumnas(2)">
                    <!-- Contenedor de Comuna con Estilo -->
                    <ng-container *ngFor="let item of columna">
                        <!-- Título de la comuna -->
                        <ng-container *ngIf="item.tipo === 'comuna'">
                            <div class="font-bold text-orange-600 mt-3 mb-1">
                                {{ item.nombre }}
                            </div>
                        </ng-container>

                        <!-- Lista de Establecimientos -->
                        <ng-container *ngIf="item.tipo === 'establecimiento'">
                            <div class="flex items-start mb-1">
                                <span class="mr-2 text-orange-400">●</span>
                                <span>{{ getModalidadAbreviada(item.modalidad) }} {{ item.nombre }}</span>
                            </div>
                        </ng-container>
                    </ng-container>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Panel Principal -->
<div class="w-full p-4 bg-white rounded-lg shadow-md mt-4">
    <!-- Encabezado del Panel -->
    <div class="mb-4">
        <h5 class="text-lg font-semibold text-gray-800">Dashboard Datos</h5>
        <p class="text-sm text-gray-600">Gestión de Datos Estratégicos / Casa Central</p>
    </div>

    <!-- Contenedor Completo de Tarjetas Inferiores -->
    <div class="grid grid-cols-4 gap-4">
        <!-- Tarjetas Inferiores con Estilos de Tarjeta -->
        <div *ngFor="let tarjeta of tarjetasInferiores; let i = index"
             class="w-full text-black flex flex-col items-center shadow-md rounded-md p-3 border border-gray-300 hover:scale-105 transition-transform duration-300"
             [ngClass]="{
               'bg-purple-200': i < 4, 
               'bg-blue-200': i >= 4 && i < 8,
               'bg-green-200': i >= 8 && i < 12, 
               'bg-indigo-500': i >= 12
             }">
          <div class="text-xs font-semibold flex items-center gap-1">
            <fa-icon *ngIf="tarjeta.icon" [icon]="tarjeta.icon" class="text-lg"></fa-icon>
            <span>{{ tarjeta.titulo }}</span>
          </div>
        </div>
    </div>
</div>
